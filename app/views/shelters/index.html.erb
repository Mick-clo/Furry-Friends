<div style="width: 100%; height: 800px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>

<br>
<br>
<div class="container" id="bg-cards">
  <div class="row map-cards">
    <% @shelters.each do |shelter| %>
      <div class="col-lg-4 col-md-6 mb-4">
        <div class="card-shelter">
          <div class="card-shelter-infos">
            <%= cl_image_tag shelter.photo.key, height: 300, width: 400, crop: :fill %>
            <img src="data:image/jpeg;base64,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">

            <div class="mark">
            <% @favourite_shelter.each do |favourite| %>
              <% if (favourite.shelter == shelter) %>
                <i class="fa-solid fa-hand-holding-heart" aria-describedby="info">
                </i>
                <div role="tooltip" id="info">
                <p>you're already donating to this shelter!</p>
              </div>
              <% end %>
            <% end %>

            </div>

            <h2> <%= shelter.name %> </h2>
              <em><i class="fas fa-map-marker-alt point"></i><%= shelter.address %> </em>
            <p> <%= shelter.description %> </p>
            <div class="d-flex shelter-buttons">
              <div class="p-2"><%= link_to "Donate", new_shelter_pet_path(shelter), class:"secondary-button" %></div>
              <div class="p-2"><%= link_to "Discover", new_shelter_pet_path(shelter), class:"tertiary-button" %></div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
